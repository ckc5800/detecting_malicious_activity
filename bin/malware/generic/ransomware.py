"""This script attempts to mimick the behavior of ransomware by
recursivly creating blank files with a .keycrypted extension for every file it sees
in the current folder and all subfolders from where it was launched.
"""
import sys
import os
sys.path.append("..")

from malware import Malware

EXTENSION = ".keycrypted"


class Ransomware(Malware):
    
    def __init__(self):
        super(Ransomware, self).__init__(sys.executable)

        self.encrypt_all(os.getcwd())

    def encrypt_all(self, path):
        for file in os.listdir(path):
            if os.path.isdir(file):
                self.encrypt_all(file)
            else:
                with open(file + EXTENSION, "w") as f:
                    f.write(" ")
                    f.close()
                
if __name__ == "__main__":
    Ransomware()

